<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>WebCodecs Playground</title>
	<link rel="stylesheet" href="./styles.css">
</head>
<body>
	<header class="app-header">
		<h1>WebCodecs Playground</h1>
		<p class="subtitle">Learn and experiment with WebCodecs: capability checks, encoding, and decoding.</p>
	</header>

	<main class="layout three-col">
		<!-- Left: Controls -->
		<div class="col col-left">
			<section class="card" id="decode-controls">
				<h2>Decode Controls</h2>
				<label class="file">
					<input id="ivf-file" type="file" accept="video/x-ivf,.ivf,video/mp4,.mp4,video/*">
				</label>
				<div class="inline gap">
					<button id="btn-decode" disabled>Decode & Play</button>
					<button id="btn-stop" disabled>Stop</button>
				</div>
				<p id="dec-status" class="status">No file loaded</p>
			</section>

			<section class="card" id="encode-controls">
				<h2>Encode Controls</h2>
				<div class="controls">
					<label>Resolution
						<div class="inline">
							<input id="enc-width" type="number" value="640" min="16" step="16"> Ã—
							<input id="enc-height" type="number" value="360" min="16" step="16">
						</div>
					</label>
					<label>FPS
						<input id="enc-fps" type="number" value="30" min="1" max="120">
					</label>
					<label>Duration (s)
						<input id="enc-seconds" type="number" value="3" min="1" max="30">
					</label>
					<label>Bitrate (kbps)
						<input id="enc-bitrate" type="number" value="1200" min="100" step="50">
					</label>
					<div class="inline gap">
						<button id="btn-encode">Start Encode</button>
						<button id="btn-cancel-encode" disabled>Cancel</button>
						<a id="download-link" class="button secondary" download="animation.ivf" hidden>Download IVF</a>
					</div>
					<p id="enc-status" class="status">Idle</p>
				</div>
			</section>
		</div>

		<!-- Center: Player -->
		<section class="card col col-center" id="player-card">
			<h2>Player</h2>
			<div class="canvas-wrap">
				<video id="mp4-video" class="player-video" controls muted playsinline hidden></video>
				<canvas id="dec-canvas" width="640" height="360"></canvas>
			</div>
			<h3 class="subheading">Encode Preview</h3>
			<div class="canvas-wrap">
				<canvas id="enc-canvas" width="640" height="360"></canvas>
			</div>
			<h3 class="subheading">Logs</h3>
			<div id="logs" class="results" style="max-height:220px; overflow:auto;"></div>
		</section>

		<!-- Right: Capabilities -->
		<section class="card col col-right" id="capabilities-card">
			<h2>Capabilities</h2>
			<p>Check your browser's WebCodecs support and available codecs.</p>
			<button id="btn-check">Run Capability Checks</button>
			<div id="cap-results" class="results"></div>
		</section>
	</main>

	<footer class="app-footer">
		<p>Requires a secure context (localhost/https) and a modern Chromium-based browser.</p>
	</footer>

	<script type="module" src="./src/main.js"></script>
</body>
</html>
